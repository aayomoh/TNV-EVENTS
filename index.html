<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TNV Events</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<header class="header">
    <div class="logo">TNV EVENTS</div>
    <nav>
        <a href="#services">Services</a>
        <a href="#contact">Contact</a>
    </nav>
</header>

<section class="hero">
    <div class="overlay"></div>
    <h1>Curating a Million Fond Memories</h1>
    <p>High-end event design, planning, and storytelling.</p>

    <a class="button" href="YOUR_DORIK_URL_HERE" target="_blank">View Full Design</a>
</section>

<section id="services" class="services">
    <h2>Our Signature Services</h2>

    <div class="service-grid">

        <div class="card">
            <h3>Design Mastery</h3>
            <p>Transform your vision into extraordinary event landscapes with precision and creativity.</p>
            <a class="button small" href="#">Explore Design</a>
        </div>

        <div class="card">
            <h3>Budget Alchemy</h3>
            <p>Strategic financial planning that maximizes luxury without compromising your dream event.</p>
            <a class="button small" href="#">Plan Finances</a>
        </div>

        <div class="card">
            <h3>Creative Storytelling</h3>
            <p>Craft immersive themes that captivate your guests and elevate your celebration.</p>
            <a class="button small" href="#">Unleash Creativity</a>
        </div>

    </div>
</section>

<section id="contact" class="contact">
    <h2>Book a Consultation</h2>

    <form id="consultation-form">
        <input type="email" id="email" name="email" placeholder="Email" required>
        <select id="project-type" name="project_type" required>
            <option value="">Select Project Type</option>
            <option value="wedding">Wedding</option>
            <option value="corporate">Corporate Event</option>
            <option value="milestone">Milestone Celebration</option>
            <option value="other">Other</option>
        </select>
        <input type="text" id="project-budget" name="project_budget" placeholder="Project Budget (optional)">
        <textarea id="message" name="message" placeholder="Tell us about your vision..." required></textarea>
        <button class="button" type="submit">Submit</button>
    </form>
</section>

<footer class="footer">
    <p>Design prototype created in Dorik. Coded version built for GitHub Pages.</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  const SUPABASE_URL = "https://nqeaciakclzaxfejxzlj.supabase.co";
  const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5xZWFjaWFrY2x6YXhmZWp4emxqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ4NzIyNDIsImV4cCI6MjA4MDQ0ODI0Mn0._KgQ2O3ruYJt3yFeyYphi2EkIFOyAsr7hKCuOw9wpY4";

  const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY, {
    auth: {
      persistSession: false
    }
  });

  document.getElementById("consultation-form").addEventListener("submit", async function(e) {
    e.preventDefault();

    const email = document.getElementById("email").value;
    const projectType = document.getElementById("project-type").value;
    const projectBudget = document.getElementById("project-budget").value;
    const message = document.getElementById("message").value;

    try {
      const { data, error } = await supabaseClient
        .from("consultation_requests")
        .insert([
          {
            email: email,
            project_type: projectType,
            project_budget: projectBudget,
            message: message
          }
        ]);

      if (error) {
        console.error("Supabase Insert Error:", {
          message: error.message,
          details: error.details,
          hint: error.hint,
          code: error.code
        });
        alert("Submission failed: " + error.message);
        return;
      }

      console.log("Submission successful:", data);
      alert("Your request has been submitted!");
      document.getElementById("consultation-form").reset();
    } catch (error) {
      console.error("Client Error:", error);
      alert("Something went wrong: " + (error.message || "Unknown error. Check browser console."));
    }
  });
</script>

<script src="script.js"></script>
</body>
</html>
